

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Lab 2: Tests, Classes, Style &amp; Imports &#8212; Python Programming for Data Science</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-dropdown.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lab 3: Introduction to NumPy and Pandas" href="../lab3/lab3.html" />
    <link rel="prev" title="Lab 1: Python Basics, Loops &amp; Functions" href="../lab1/lab1.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/511_logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Python Programming for Data Science</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../README.html">
   Python Programming for Data Science
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture1-basics.html">
   Lecture 1: Python Basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture2-loops-functions.html">
   Lecture 2: Loops &amp; Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture3-tests-classes.html">
   Lecture 3: Unit Tests &amp; Classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture4-style-scripts-imports.html">
   Lecture 4: Style Guides, Scripts, Imports
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture5-numpy.html">
   Lecture 5: Part 1 - Introduction to NumPy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture5-numpy-addendum.html">
   Lecture 5: Part 2 - NumPy Implementation Details
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture6-pandas.html">
   Lecture 6: Introduction to Pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture7-wrangling-basics.html">
   Lecture 7: Basic Data Wrangling With Pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture8-wrangling-advanced.html">
   Lecture 8: Advanced Data Wrangling With Pandas
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Lab Assignments
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../lab1/lab1.html">
   Lab 1: Python Basics, Loops &amp; Functions
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Lab 2: Tests, Classes, Style &amp; Imports
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab3/lab3.html">
   Lab 3: Introduction to NumPy and Pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab4/lab4.html">
   Lab 4: Advanced Wrangling with Pandas
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Tomas Beuzen, MDS 2020<br>Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/lab-assignments/lab2/lab2.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/TomasBeuzen/python-programming-for-data-science/master?urlpath=tree/lab-assignments/lab2/lab2.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/TomasBeuzen/python-programming-for-data-science/blob/master/lab-assignments/lab2/lab2.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-1-geometric-brownian-motion">
   Exercise 1: Geometric Brownian Motion
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-2-stock-options">
   Exercise 2: Stock Options
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-3-option-value-via-monte-carlo-simulation">
   Exercise 3: Option Value via Monte Carlo Simulation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-exercise-4-black-scholes">
   (OPTIONAL) Exercise 4: Black-Scholes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-exercise-5-theory-vs-practice">
   (OPTIONAL) Exercise 5: Theory vs. Practice
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-exercise-6-smoothing-a-curve">
   (OPTIONAL) Exercise 6: Smoothing a Curve
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-7-putting-it-all-together-with-classes">
   Exercise 7: Putting it all Together with Classes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-8-creating-a-stock-subclass">
   Exercise 8: Creating a Stock Subclass
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-9-creating-a-portfolio">
   Exercise 9: Creating a Portfolio
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <p><img alt="" src="../../_images/511_banner2.png" /></p>
<div class="section" id="lab-2-tests-classes-style-imports">
<h1>Lab 2: Tests, Classes, Style &amp; Imports<a class="headerlink" href="#lab-2-tests-classes-style-imports" title="Permalink to this headline">¶</a></h1>
<p><strong>Tomas Beuzen, September 2020</strong></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>IMPORTANT:<br>This is a group lab - you will complete this lab with your assigned partner(s).<br>You will share a single GitHub repository which you can all push to.<br>Only one person in the group needs to submit to Canvas.</strong></p></td>
<td><p><img alt="" src="../../_images/we_got_this.png" /></p></td>
</tr>
</tbody>
</table>
<p><strong>Please add a link to your GitHub repository here:</strong></p>
<p>In this lab, you’ll complete various exercises related to Python functions, tests, classes, &amp; imports. This lab will help you write better functions in Python, build classes and subclasses, and write tests. The assignment is based on the task of simulating stock prices over time. Note that there are 9 Exercises, but only 6 are required. Only some Exercises are provided with tests for you to test your solutions. The final question of this lab is tough but is good practice for using Python classes!</p>
<h2>Table of Contents<span class="tocSkip"></span></h2>
<div class="toc"><ul class="toc-item"><li><span><a href="#exercise-1-geometric-brownian-motion" data-toc-modified-id="Exercise-1:-Geometric-Brownian-Motion-2">Exercise 1: Geometric Brownian Motion</a></span></li><li><span><a href="#exercise-2-stock-options" data-toc-modified-id="Exercise-2:-Stock-Options-3">Exercise 2: Stock Options</a></span></li><li><span><a href="#exercise-3-option-value-via-monte-carlo-simulation" data-toc-modified-id="Exercise-3:-Option-Value-via-Monte-Carlo-Simulation-4">Exercise 3: Option Value via Monte Carlo Simulation</a></span></li><li><span><a href="#optional-exercise-4-black-scholes" data-toc-modified-id="(OPTIONAL)-Exercise-4:-Black-Scholes-5">(OPTIONAL) Exercise 4: Black-Scholes</a></span></li><li><span><a href="#optional-exercise-5-theory-vs.-practice" data-toc-modified-id="(OPTIONAL)-Exercise-5:-Theory-vs.-Practice-6">(OPTIONAL) Exercise 5: Theory vs. Practice</a></span></li><li><span><a href="#optional-exercise-6-smoothing-a-curve" data-toc-modified-id="(OPTIONAL)-Exercise-6:-Smoothing-a-Curve-7">(OPTIONAL) Exercise 6: Smoothing a Curve</a></span></li><li><span><a href="#exercise-7-putting-it-all-together-with-classes" data-toc-modified-id="Exercise-7:-Putting-it-all-Together-with-Classes-8">Exercise 7: Putting it all Together with Classes</a></span></li><li><span><a href="#exercise-8-creating-a-stock-subclass" data-toc-modified-id="Exercise-8:-Creating-a-Stock-Subclass-9">Exercise 8: Creating a Stock Subclass</a></span></li><li><span><a href="#exercise-9-creating-a-portfolio" data-toc-modified-id="Exercise-9:-Creating-a-Portfolio-10">Exercise 9: Creating a Portfolio</a></span></li><li><span><a href="#run-autograding" data-toc-modified-id="Run-Autograding-11">Run Autograding</a></span></li><li><span><a href="#submission-to-canvas" data-toc-modified-id="Submission-to-Canvas-12">Submission to Canvas</a></span></li></ul></div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run this cell. These are imports we&#39;ll need for this lab</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">gauss</span>
<span class="kn">import</span> <span class="nn">scipy.stats</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;ggplot&#39;</span><span class="p">)</span>  <span class="c1"># These lines are to do with plot formatting. We&#39;ll talk about them in a later lecture.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
                     <span class="s1">&#39;axes.labelweight&#39;</span><span class="p">:</span> <span class="s1">&#39;bold&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;figure.figsize&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">)})</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="exercise-1-geometric-brownian-motion">
<h2>Exercise 1: Geometric Brownian Motion<a class="headerlink" href="#exercise-1-geometric-brownian-motion" title="Permalink to this headline">¶</a></h2>
<hr>
<p>rubric={autograde:2}</p>
<p>We will simulate a stock’s price fluctuation over time by assuming the stock price follows a <a class="reference external" href="https://en.wikipedia.org/wiki/Geometric_Brownian_motion"><em>geometric Brownian motion</em></a>. In Lab 1 you simulated a random walk which is essentially Brownian motion: at each time step you add a small random amount to your current position. In geometric Brownian motion, at each time step you <em>multiply</em> your current state by a (positive) random amount. Note that in regular Brownian motion the position can be both positive or negative, but in geometric Brownian motion the position is always positive; this is good because stock prices are never negative. An example is shown in the figure below:</p>
<p><img alt="" src="../../_images/stock.png" /></p>
<p>In our model of stock prices, the current price <span class="math notranslate nohighlight">\(S_t\)</span> depends on the previous price <span class="math notranslate nohighlight">\(S_{t-1}\)</span> as follows:</p>
<div class="math notranslate nohighlight">
\[
S_t = S_{t-1} \exp \left( -0.5\sigma^2 + \sigma Z \right)
\]</div>
<p>where <span class="math notranslate nohighlight">\(Z\)</span> is a random number drawn from a standard <a class="reference external" href="https://en.wikipedia.org/wiki/Normal_distribution">Gaussian distribution</a>. You can generate these random draws with <code class="docutils literal notranslate"><span class="pre">gauss(0,</span> <span class="pre">1)</span></code> (which we imported from the <code class="docutils literal notranslate"><span class="pre">random</span></code> module at the start of the lab). Python comes with a built-in module called <code class="docutils literal notranslate"><span class="pre">math</span></code> (which we imported at the start of the lab with <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">math</span></code>). <code class="docutils literal notranslate"><span class="pre">math</span></code> contains a variety of useful math operations such as <code class="docutils literal notranslate"><span class="pre">math.exp()</span></code>, <code class="docutils literal notranslate"><span class="pre">math.sqrt()</span></code>, <code class="docutils literal notranslate"><span class="pre">math.log()</span></code>, and <code class="docutils literal notranslate"><span class="pre">math.pow()</span></code>, which you may use throughout this lab.</p>
<p>The parameter <span class="math notranslate nohighlight">\(\sigma\)</span> is the <em>volatility</em> of the stock. The volatility is analogous to the step size in a random walk: a larger volatility means more movement in a given amount of time. (Note that if <span class="math notranslate nohighlight">\(\sigma=0\)</span> then the stock price never changes, whereas if <span class="math notranslate nohighlight">\(\sigma\)</span> is large the stock price can change wildly). The figure above  was generated using <span class="math notranslate nohighlight">\(S_0=10\)</span>, <span class="math notranslate nohighlight">\(\sigma=0.01\)</span>, and <span class="math notranslate nohighlight">\(T=1000\)</span>.</p>
<p><strong>Your tasks</strong></p>
<hr>
<ol class="simple">
<li><p>Write a function <code class="docutils literal notranslate"><span class="pre">simulate(S0,</span> <span class="pre">σ,</span> <span class="pre">T)</span></code> that takes as arguments <span class="math notranslate nohighlight">\(S_0\)</span>, <span class="math notranslate nohighlight">\(\sigma\)</span>, and <span class="math notranslate nohighlight">\(T\)</span>, that simulates the geometric Brownian motion for <span class="math notranslate nohighlight">\(T\)</span> steps using the equation above, and then returns an array of size <span class="math notranslate nohighlight">\(T+1\)</span> containing the stock price at each time step;</p></li>
<li><p>You should write a docstring for your function.</p></li>
<li><p>You are given some plotting code to test out your function.</p></li>
</ol>
<p><em>Hints:</em></p>
<ul class="simple">
<li><p><em>Start by initializing an empty list and then appending to it with a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop.</em></p></li>
<li><p><em>Use <code class="docutils literal notranslate"><span class="pre">gauss(0,</span> <span class="pre">1)</span></code> for <span class="math notranslate nohighlight">\(Z\)</span>, use <code class="docutils literal notranslate"><span class="pre">math.exp()</span></code> for <span class="math notranslate nohighlight">\(exp()\)</span>.</em></p></li>
<li><p><em>When writing your tests, it might be easiest to think about the scenarios that would not be random…</em></p></li>
<li><p><em>Do not use the NumPy library here (if you are already familiar with it) - we’ll be doing that next lab.</em></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">simulate</span><span class="p">(</span><span class="n">S0</span><span class="p">,</span> <span class="n">σ</span><span class="p">,</span> <span class="n">T</span><span class="p">):</span>
    <span class="k">pass</span>  <span class="c1"># remove this line if providing a solution</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Code you can use for plotting your function</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">trace</span> <span class="o">=</span> <span class="n">simulate</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Stock price ($)&quot;</span><span class="p">);</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There was an error plotting your function output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>There was an error plotting your function output.
</pre></div>
</div>
<img alt="../../_images/lab2_9_1.png" src="../../_images/lab2_9_1.png" />
</div>
</div>
</div>
<div class="section" id="exercise-2-stock-options">
<h2>Exercise 2: Stock Options<a class="headerlink" href="#exercise-2-stock-options" title="Permalink to this headline">¶</a></h2>
<hr>
<p>rubric={accuracy:2,quality:2}</p>
<p>A <em>stock option</em> or <a class="reference external" href="https://en.wikipedia.org/wiki/Call_option"><em>call option</em></a> is a promise that you will be allowed (but not obligated) to buy a certain stock for a certain price at a certain time. For example, I might have a stock option for 1 Google share with a <em>strike price</em> of <span class="math notranslate nohighlight">\(500 and an _expiration date_ of one year from now. This means that, if I want to, I have the option to buy 1 Google share for \)</span>500 in one year.</p>
<p>So, under what circumstances would I want to do that? Well, if the Google stock price one year from now is <span class="math notranslate nohighlight">\(400, then I certainly would not want to exercise my option to pay \)</span>500 when I could be paying $400 for the same thing! Therefore, we say that the option turned out to be worthless if the share price is below the strike price at the expiration date of the option.</p>
<p>On the other hand, if the Google share price turned out to be <span class="math notranslate nohighlight">\(600 one year from now, then I'm in luck: by exercising my option to buy a share for \)</span>500, and then immediately selling it at the market price of <span class="math notranslate nohighlight">\(600, I have made a profit of \)</span>100. A representation of what we just said in mathematical symbols is that, at the expiration time <span class="math notranslate nohighlight">\(T\)</span>, the option’s profit <span class="math notranslate nohighlight">\(P_T\)</span> is a function of the strike price <span class="math notranslate nohighlight">\(X\)</span> (defined at time <span class="math notranslate nohighlight">\(T\)</span>) and <strong>the stock price at the expiration date <span class="math notranslate nohighlight">\(S_T\)</span></strong> given by</p>
<div class="math notranslate nohighlight">
\[
P_T=\max(0, S_T-X)
\]</div>
<p>Ponder this for a moment and make sure you understand how the math corresponds with the explanation above (<em>note: we are using the word profit a bit loosely; in reality, you would need to pay for the option in the first place. In general, please forgive any financial misdemeanors here</em>).</p>
<p><strong>Your tasks</strong></p>
<hr>
<ol class="simple">
<li><p>Write a function <code class="docutils literal notranslate"><span class="pre">option_profit(S,</span> <span class="pre">X)</span></code> that takes in a list of a simulated stock trace (i.e., <span class="math notranslate nohighlight">\(S\)</span>, the output of <code class="docutils literal notranslate"><span class="pre">simulate(S0,</span> <span class="pre">σ,</span> <span class="pre">T)</span></code> from Exercise 1), and an option strike price <span class="math notranslate nohighlight">\(X\)</span>, and returns the option’s profit using the formula above (note that <span class="math notranslate nohighlight">\(S_T\)</span> represents the end of the time series, which is what we want to compare <span class="math notranslate nohighlight">\(X\)</span>);</p></li>
<li><p>You must also write at least two tests for your function.</p></li>
<li><p>Write a docstring for your function.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">option_profit</span><span class="p">():</span>
    <span class="k">pass</span>  <span class="c1"># remove this line if providing a solution</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-3-option-value-via-monte-carlo-simulation">
<h2>Exercise 3: Option Value via Monte Carlo Simulation<a class="headerlink" href="#exercise-3-option-value-via-monte-carlo-simulation" title="Permalink to this headline">¶</a></h2>
<hr>
<p>rubric={accuracy:3,quality:2}</p>
<p>An important question that arises is, what is an option’s fair value at the time it is issued (<span class="math notranslate nohighlight">\(t=0\)</span>), <strong>before</strong> we know what is going to happen to the stock price? To use our previous example, if Google shares currently trade at <span class="math notranslate nohighlight">\(500, how much would you pay for an option to buy it for \)</span>500 in one year? Or <span class="math notranslate nohighlight">\(600 in one year? Or \)</span>600 in two years? Indeed, the option value will depend on the strike price and the duration, among other things.</p>
<p>Although the problem of valuing an option has been addressed theoretically (see Exercise 4), we will estimate it empirically by simulating the stock price with <code class="docutils literal notranslate"><span class="pre">simulate(S0,</span> <span class="pre">σ,</span> <span class="pre">T)</span></code>, and then computing the option profit <span class="math notranslate nohighlight">\(P_T\)</span> with <code class="docutils literal notranslate"><span class="pre">option_profit(S,</span> <span class="pre">X)</span></code>. Sometimes the simulation will yield a worthless option (because the stock price is below the strike price), and other times it will be worth something (because the stock price is above the strike price). By repeating the simulation many times and taking the average, we can compute an “expected” or average value of the option, which we will take to be its fair value (<span class="math notranslate nohighlight">\(P_0\)</span>). This general approach of simulating a random process in order to understand its characteristics is called a <a class="reference external" href="https://en.wikipedia.org/wiki/Monte_Carlo_method"><em>Monte Carlo method</em></a>.</p>
<p><strong>Your tasks</strong></p>
<hr>
<ol class="simple">
<li><p>Write a function <code class="docutils literal notranslate"><span class="pre">option_value_monte_carlo()</span></code> that takes as arguments <span class="math notranslate nohighlight">\(S_0\)</span>, <span class="math notranslate nohighlight">\(\sigma\)</span>, <span class="math notranslate nohighlight">\(T\)</span>, <span class="math notranslate nohighlight">\(X\)</span>, and the number of simulations <span class="math notranslate nohighlight">\(N\)</span>, and returns the average option value (averaged over the <span class="math notranslate nohighlight">\(N\)</span> simulations). You can specify <span class="math notranslate nohighlight">\(N\)</span> as a keyword argument, with a default value of <span class="math notranslate nohighlight">\(100\)</span>;</p></li>
<li><p>Your function should make use of <code class="docutils literal notranslate"><span class="pre">simulate()</span></code> and <code class="docutils literal notranslate"><span class="pre">option_profit()</span></code>;</p></li>
<li><p>You must also write at least two tests for your function.</p></li>
<li><p>Write a docstring for your function.</p></li>
</ol>
<p><em>Hint: to find the mean of a list you can calculate the <code class="docutils literal notranslate"><span class="pre">sum()</span></code> and divide by the <code class="docutils literal notranslate"><span class="pre">len()</span></code>.</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">option_value_monte_carlo</span><span class="p">():</span>
    <span class="k">pass</span>  <span class="c1"># remove this line if providing a solution</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="optional-exercise-4-black-scholes">
<h2>(OPTIONAL) Exercise 4: Black-Scholes<a class="headerlink" href="#optional-exercise-4-black-scholes" title="Permalink to this headline">¶</a></h2>
<hr>
<p>rubric={accuracy:1}</p>
<p>The famous <a class="reference external" href="https://en.wikipedia.org/wiki/Black%E2%80%93Scholes_model">Black-Scholes formula</a> was derived by a theoretical analysis of the geometric Brownian motion model discussed above. It turns out that (in our oversimplified case of zero interest rate) the expected option price, <span class="math notranslate nohighlight">\(P_0\)</span>, is given by:</p>
<div class="math notranslate nohighlight">
\[P_0 = \Phi(d_1)S_0 -\Phi(d_2)X \]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[d_1 = \frac{1}{\sigma \sqrt{T}} \left[ \log \left(\frac{S_0}{X} \right) + \frac{\sigma^2}{2}T\right]\]</div>
<p>and</p>
<div class="math notranslate nohighlight">
\[d_2 = \frac{1}{\sigma \sqrt{T}} \left[ \log \left(\frac{S_0}{X} \right) - \frac{\sigma^2}{2}T\right] \]</div>
<p>and <span class="math notranslate nohighlight">\(\Phi(\cdot)\)</span> is the cumulative distribution function of the Gaussian distribution, which can be computed with <code class="docutils literal notranslate"><span class="pre">scipy.stats.norm.cdf(x)</span></code>. Note: unless otherwise specified, <span class="math notranslate nohighlight">\(\log\)</span> refers to the natural logarithm.</p>
<p>Your task: write a function <code class="docutils literal notranslate"><span class="pre">black_scholes</span></code> that takes as arguments <span class="math notranslate nohighlight">\(S_0\)</span>, <span class="math notranslate nohighlight">\(\sigma\)</span>, <span class="math notranslate nohighlight">\(T\)</span>, and <span class="math notranslate nohighlight">\(X\)</span>, and returns the Black-Scholes option price given by the equation above. You must also write at least two tests for your function.</p>
<p><strong>Your tasks</strong></p>
<hr>
<ul class="simple">
<li><p>Write a function <code class="docutils literal notranslate"><span class="pre">black_scholes(S0,</span> <span class="pre">σ,</span> <span class="pre">T,</span> <span class="pre">X)</span></code> that takes as arguments <span class="math notranslate nohighlight">\(S_0\)</span>, <span class="math notranslate nohighlight">\(\sigma\)</span>, <span class="math notranslate nohighlight">\(T\)</span>, and <span class="math notranslate nohighlight">\(X\)</span>, and returns the Black-Scholes option price given by the equation above;</p></li>
<li><p>You must also write at least two tests for your function.</p></li>
<li><p>And don’t forget to write a docstring!</p></li>
</ul>
<p><em>Hints:</em></p>
<ul class="simple">
<li><p><em><span class="math notranslate nohighlight">\(\Phi(\cdot)\)</span> can be calculated using <code class="docutils literal notranslate"><span class="pre">scipy.stats.norm.cdf(x)</span></code> (we imported <code class="docutils literal notranslate"><span class="pre">scipy.stats</span></code> at the start of this lab)</em>;</p></li>
<li><p><em>Remember that the <code class="docutils literal notranslate"><span class="pre">math</span></code> module contains useful functions like <code class="docutils literal notranslate"><span class="pre">math.sqrt()</span></code>, <code class="docutils literal notranslate"><span class="pre">math.log()</span></code>, and <code class="docutils literal notranslate"><span class="pre">math.pow()</span></code>, some of which you’ll need here. While operations like square root can be perform using <code class="docutils literal notranslate"><span class="pre">**</span></code> notation, e.g., <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">**</span> <span class="pre">0.5</span></code>, I still sometimes use the <code class="docutils literal notranslate"><span class="pre">math</span></code> functions because they can make my code more readable/<a class="reference external" href="https://stackoverflow.com/questions/327002/which-is-faster-in-python-x-5-or-math-sqrtx">slightly faster</a>.</em></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">black_scholes</span><span class="p">():</span>
    <span class="k">pass</span>  <span class="c1"># remove this line if providing a solution</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="optional-exercise-5-theory-vs-practice">
<h2>(OPTIONAL) Exercise 5: Theory vs. Practice<a class="headerlink" href="#optional-exercise-5-theory-vs-practice" title="Permalink to this headline">¶</a></h2>
<hr>
<p>rubric={reasoning:1}</p>
<p>Compare your theoretical results from Exercise 4 with your empirical results from Exercise 3 - do they agree?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="optional-exercise-6-smoothing-a-curve">
<h2>(OPTIONAL) Exercise 6: Smoothing a Curve<a class="headerlink" href="#optional-exercise-6-smoothing-a-curve" title="Permalink to this headline">¶</a></h2>
<hr>
<p>rubric={accuracy:1}</p>
<p>Your simulation from Exercise 1 shows the stock price at every time step, and is therefore very “bumpy”. Investors are often more interested in a <em>smoothed</em> depiction of the stock price over time, in which small ups and downs are removed, leaving only the salient trends. The figure below shows a smoothed stock price in red, generated using a moving average window with <span class="math notranslate nohighlight">\(W=25\)</span>:</p>
<p><img alt="" src="../../_images/stock_smooth.png" /></p>
<p>The smoothing is achieved by replacing the price at time <span class="math notranslate nohighlight">\(t\)</span> with an average of all the prices from times <span class="math notranslate nohighlight">\(t-W\)</span> to <span class="math notranslate nohighlight">\(t+W\)</span> (inclusive), for some positive integer <span class="math notranslate nohighlight">\(W\)</span> (thus, the total width of the window is <span class="math notranslate nohighlight">\(2W+1\)</span>). There are various options for dealing with the edges of the plot, here we will assume that when we do not have enough data for the entire window, the average is computed only over the portion of the window that is within the data range. For example, if <span class="math notranslate nohighlight">\(T=1000\)</span> and <span class="math notranslate nohighlight">\(W=5\)</span> then the smoothed curve at <span class="math notranslate nohighlight">\(t=0\)</span> is the average of the prices from <span class="math notranslate nohighlight">\(t=0\)</span> to <span class="math notranslate nohighlight">\(t=5\)</span>, the smoothed curve at <span class="math notranslate nohighlight">\(t=1\)</span> is the average of the prices from <span class="math notranslate nohighlight">\(t=0\)</span> to <span class="math notranslate nohighlight">\(t=6\)</span>, the smoothed curve at <span class="math notranslate nohighlight">\(t=10\)</span> is the average of the prices from <span class="math notranslate nohighlight">\(t=5\)</span> to <span class="math notranslate nohighlight">\(t=15\)</span>, and the smoothed curve at <span class="math notranslate nohighlight">\(t=997\)</span> is the average of the prices from <span class="math notranslate nohighlight">\(t=992\)</span> to <span class="math notranslate nohighlight">\(t=1000\)</span>.</p>
<p><strong>Your tasks</strong></p>
<hr>
<ol class="simple">
<li><p>Write a function <code class="docutils literal notranslate"><span class="pre">smooth</span></code> that takes in an array of values (such as the output of <code class="docutils literal notranslate"><span class="pre">simulate</span></code>) and the window width <span class="math notranslate nohighlight">\(W\)</span>, and returns a smoothed version the input array using the sliding window averaging scheme described above. Set the default value of <span class="math notranslate nohighlight">\(W\)</span> to <span class="math notranslate nohighlight">\(25\)</span>. The returned array should be the same size as the input array.;</p></li>
<li><p>You must also write at least two tests for your function.</p></li>
<li><p>And don’t forget to write a docstring!</p></li>
</ol>
<p><em>Hint: start by initializing a numpy array and then fill it in using a loop. At each iteration of the loop, compute the two ends of the window, taking into account the special cases if you are near the edge of the array. Then, you can slice the input array to take only the values in the window, and finally you can take the mean of these with <code class="docutils literal notranslate"><span class="pre">np.mean</span></code>.</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">smooth</span><span class="p">():</span>
    <span class="k">pass</span>  <span class="c1"># remove this line if providing a solution</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Code you can use for plotting your function </span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">trace</span> <span class="o">=</span> <span class="n">simulate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="n">trace_smooth</span> <span class="o">=</span> <span class="n">smooth</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Original&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">trace_smooth</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Smoothed&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Stock price ($)&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There was an error plotting your function output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>There was an error plotting your function output.
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-7-putting-it-all-together-with-classes">
<h2>Exercise 7: Putting it all Together with Classes<a class="headerlink" href="#exercise-7-putting-it-all-together-with-classes" title="Permalink to this headline">¶</a></h2>
<hr>
<p>rubric={autograde:2}</p>
<p>Let’s create a class to represent geometric Brownian motion. Below is the skeleton of a class <code class="docutils literal notranslate"><span class="pre">Brownian</span></code>. The constructor takes in two arguments, <code class="docutils literal notranslate"><span class="pre">price</span></code> (initial price) and <code class="docutils literal notranslate"><span class="pre">σ</span></code> (volatility) and should store these as instance attributes.</p>
<p><strong>Your tasks</strong></p>
<hr>
<ol class="simple">
<li><p>Complete the constructor method <code class="docutils literal notranslate"><span class="pre">__init__</span></code>;</p></li>
<li><p>Write a method called <code class="docutils literal notranslate"><span class="pre">simulate()</span></code>, which takes in the number of time steps <span class="math notranslate nohighlight">\(T\)</span> with a default value of 100, simulates the geometric Brownian motion for  <span class="math notranslate nohighlight">\(T\)</span>  steps, and returns a list of the simulated time series. It is fine to copy/paste a bunch of the code from the Exercises above.</p></li>
<li><p>Be sure to write a docstring for your class and method.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Brownian</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Geometric Brownian motion.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    price : float</span>
<span class="sd">        the initial stock price</span>
<span class="sd">    σ : float</span>
<span class="sd">        stock volatility, should be non-negative</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; b = Brownian(1, 0.1)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">σ</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;See help(Brownian)&quot;&quot;&quot;</span>
        <span class="k">pass</span>  <span class="c1"># remove this line if providing a solution</span>

<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-8-creating-a-stock-subclass">
<h2>Exercise 8: Creating a Stock Subclass<a class="headerlink" href="#exercise-8-creating-a-stock-subclass" title="Permalink to this headline">¶</a></h2>
<hr>
<p>rubric={accuracy:2,quality:2}</p>
<p>Our <code class="docutils literal notranslate"><span class="pre">Brownian</span></code> class above is the perfect foundation for us to create a <code class="docutils literal notranslate"><span class="pre">Stock</span></code> subclass that inherits attributes/methods of <code class="docutils literal notranslate"><span class="pre">Brownian</span></code> but also adds some more stock-specific functionality.</p>
<p><strong>Your tasks</strong></p>
<hr>
<ol class="simple">
<li><p>Create a new class call <code class="docutils literal notranslate"><span class="pre">Stock</span></code> that <strong>inherits</strong> everything from the <code class="docutils literal notranslate"><span class="pre">Brownian</span></code> class from Exercise 7, but also has a <code class="docutils literal notranslate"><span class="pre">name</span></code> instance attribute which holds the name of the stock;</p></li>
<li><p>Write a method called <code class="docutils literal notranslate"><span class="pre">simulate_price()</span></code>, which takes in the number of time steps <span class="math notranslate nohighlight">\(T\)</span> and a keyword argument <span class="math notranslate nohighlight">\(N\)</span> with a default value of 100, and uses Monte Carlo to estimate the stock price <strong>after</strong> <span class="math notranslate nohighlight">\(T\)</span> time steps, averaged over <span class="math notranslate nohighlight">\(N\)</span> trials and returns the result. Your method should <em>not</em> modify <code class="docutils literal notranslate"><span class="pre">self.price</span></code> (<em>hint: your class is inheriting the <code class="docutils literal notranslate"><span class="pre">simulate()</span></code> code from <code class="docutils literal notranslate"><span class="pre">Brownian</span></code> which you can use with <code class="docutils literal notranslate"><span class="pre">self.simulate()</span></code></em>).</p></li>
<li><p>Be sure to write a docstring for your class and method.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Stock</span><span class="p">(</span><span class="n">Brownian</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A stock that is traded on the stock market.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    price : float</span>
<span class="sd">        the initial stock price</span>
<span class="sd">    σ : float</span>
<span class="sd">        stock volatility, should be non-negative</span>
<span class="sd">    name : str</span>
<span class="sd">        stock name</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; disney = Stock(550.0, 0.25, &quot;DIS&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">σ</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;See help(Stock)&quot;&quot;&quot;</span>
        <span class="k">pass</span>  <span class="c1"># remove this line if providing a solution</span>
    
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-9-creating-a-portfolio">
<h2>Exercise 9: Creating a Portfolio<a class="headerlink" href="#exercise-9-creating-a-portfolio" title="Permalink to this headline">¶</a></h2>
<hr>
<p>rubric={accuracy:3,quality:3}</p>
<p>Inheritance is a tricky subject so we’re going to go through one more exercise for practice. This is definitely the hardest question of this lab, but should teach you some good Python skills! Only a bit of helper code is provided here, but I’ve provided some tests so that you can test whether your code is working as it should.</p>
<p>The file <code class="docutils literal notranslate"><span class="pre">wallet.py</span></code> provided with your lab contains a basic class called <code class="docutils literal notranslate"><span class="pre">Wallet</span></code> that stores a cash balance and provides methods to <code class="docutils literal notranslate"><span class="pre">buy_item()</span></code> and <code class="docutils literal notranslate"><span class="pre">sell_item()</span></code>. We created this class together in Lecture 4.</p>
<p><strong>Your tasks</strong></p>
<hr>
<p>Your task here is to build a new <code class="docutils literal notranslate"><span class="pre">Portfolio</span></code> class that inherits from <code class="docutils literal notranslate"><span class="pre">Wallet</span></code> and has the following:</p>
<ol class="simple">
<li><p>Overwrites the <code class="docutils literal notranslate"><span class="pre">item</span></code> class attribute with the value <code class="docutils literal notranslate"><span class="pre">&quot;Portfolio&quot;</span></code> (rather than <code class="docutils literal notranslate"><span class="pre">&quot;Wallet&quot;</span></code>);</p></li>
<li><p>An instance attribute called <code class="docutils literal notranslate"><span class="pre">stocks_owned</span></code> which initializes as <code class="docutils literal notranslate"><span class="pre">Counter()</span></code> (I’ve done this for you in the starter code below). We did not cover <code class="docutils literal notranslate"><span class="pre">Counter()</span></code> in class but it’s an easy way to keep track of your stocks. Its docs are <a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.Counter">here</a>, but all you need to know is that it keeps count of any object you pass it (like a <code class="docutils literal notranslate"><span class="pre">Stock</span></code>), for example:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="n">apple</span> <span class="o">=</span> <span class="n">Stock</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="s2">&quot;AAPL&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="p">[</span><span class="n">apple</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">c</span><span class="p">[</span><span class="n">apple</span><span class="p">]</span>
<span class="mi">5</span>
<span class="n">c</span><span class="p">[</span><span class="n">apple</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">2</span>
<span class="n">c</span><span class="p">[</span><span class="n">apple</span><span class="p">]</span>
<span class="mi">7</span>
</pre></div>
</div>
<ol class="simple">
<li><p>A method <code class="docutils literal notranslate"><span class="pre">buy_stock</span></code>, which takes in a <code class="docutils literal notranslate"><span class="pre">stock</span></code> instance and the number of stocks to buy. Bought stock should be added to the <code class="docutils literal notranslate"><span class="pre">stocks_owned</span></code> counter with <code class="docutils literal notranslate"><span class="pre">self.stocks_owned[stock]</span> <span class="pre">+=</span> <span class="pre">number</span></code>. If you don’t have enough money to buy the <code class="docutils literal notranslate"><span class="pre">number</span></code> of <code class="docutils literal notranslate"><span class="pre">stock</span></code> you want, a <code class="docutils literal notranslate"><span class="pre">InsufficientCashError</span></code> should be raised (this is already built-in to <code class="docutils literal notranslate"><span class="pre">Wallet.buy_item()</span></code> for you!).</p></li>
<li><p>A method <code class="docutils literal notranslate"><span class="pre">sell_stock</span></code>, which takes in a <code class="docutils literal notranslate"><span class="pre">Stock</span></code> instance and the number of stocks to sell. Sold stock should be removed from the <code class="docutils literal notranslate"><span class="pre">stocks_owned</span></code> counter with <code class="docutils literal notranslate"><span class="pre">self.stocks_owned[stock]</span> <span class="pre">-=</span> <span class="pre">number</span></code>. If you don’t have enough <code class="docutils literal notranslate"><span class="pre">stock</span></code> to sell, a <code class="docutils literal notranslate"><span class="pre">InsufficientStockError</span></code> (I’ve made this for you).</p></li>
<li><p>A method <code class="docutils literal notranslate"><span class="pre">portfolio_value()</span></code>, which computes the current value of your portfolio, <em>including your cash</em>.</p></li>
<li><p>A method <code class="docutils literal notranslate"><span class="pre">simulated_portfolio_value()</span></code>, which computes the value of your portfolio, <em>including your cash</em>, after time <span class="math notranslate nohighlight">\(T\)</span> (make use of <code class="docutils literal notranslate"><span class="pre">stock.simulate_price()</span></code> to do this!)</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">wallet</span> <span class="kn">import</span> <span class="n">Wallet</span><span class="p">,</span> <span class="n">InsufficientCashError</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="k">class</span> <span class="nc">InsufficientStockError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Portfolio</span><span class="p">(</span><span class="n">Wallet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An investment portfolio consisting of Stocks and cash.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">balance</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">balance</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stocks_owned</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
        
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
<p><img alt="" src="../../_images/good_stuff.png" /></p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./lab-assignments/lab2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="../lab1/lab1.html" title="previous page">Lab 1: Python Basics, Loops &amp; Functions</a>
    <a class='right-next' id="next-link" href="../lab3/lab3.html" title="next page">Lab 3: Introduction to NumPy and Pandas</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Tomas Beuzen<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    
  </body>
</html>
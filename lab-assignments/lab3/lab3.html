

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Lab 3: Introduction to NumPy and Pandas &#8212; Python Programming for Data Science</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-dropdown.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lab 4: Advanced Wrangling with Pandas" href="../lab4/lab4.html" />
    <link rel="prev" title="Lab 2: Tests, Classes, Style &amp; Imports" href="../lab2/lab2.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/511_logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Python Programming for Data Science</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../README.html">
   Python Programming for Data Science
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture1-basics.html">
   Lecture 1: Python Basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture2-loops-functions.html">
   Lecture 2: Loops &amp; Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture3-tests-classes.html">
   Lecture 3: Unit Tests &amp; Classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture4-style-scripts-imports.html">
   Lecture 4: Style Guides, Scripts, Imports
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture5-numpy.html">
   Lecture 5: Part 1 - Introduction to NumPy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture5-numpy-addendum.html">
   Lecture 5: Part 2 - NumPy Implementation Details
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture6-pandas.html">
   Lecture 6: Introduction to Pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture7-wrangling-basics.html">
   Lecture 7: Basic Data Wrangling With Pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/lecture8-wrangling-advanced.html">
   Lecture 8: Advanced Data Wrangling With Pandas
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Lab Assignments
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../lab1/lab1.html">
   Lab 1: Python Basics, Loops &amp; Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab2/lab2.html">
   Lab 2: Tests, Classes, Style &amp; Imports
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Lab 3: Introduction to NumPy and Pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab4/lab4.html">
   Lab 4: Advanced Wrangling with Pandas
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Tomas Beuzen, MDS 2020<br>Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/lab-assignments/lab3/lab3.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/TomasBeuzen/python-programming-for-data-science/master?urlpath=tree/lab-assignments/lab3/lab3.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/TomasBeuzen/python-programming-for-data-science/blob/master/lab-assignments/lab3/lab3.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-1-numpy-warm-up">
   Exercise 1: NumPy Warm Up
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     1.1
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     1.2
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     1.3
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     1.4
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-2-vectorizing-geometric-brownian-motion">
   Exercise 2: Vectorizing Geometric Brownian Motion
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     2.1
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id6">
     2.2
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-3-numpy-wrangling">
   Exercise 3: NumPy Wrangling
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id7">
     3.1
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id8">
     3.2
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optional-3-3">
     (OPTIONAL) 3.3
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optional-3-4">
     (OPTIONAL) 3.4
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-4-reading-data-with-pandas">
   Exercise 4: Reading Data with Pandas
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-5-treasure-hunt-with-pandas">
   Exercise 5: Treasure Hunt with Pandas
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id9">
     5.1
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id10">
     5.2
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id11">
     5.3
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id12">
     5.4
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id13">
     5.5
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id14">
     5.6
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id15">
     5.7
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id16">
     5.8
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-6-mind-the-gap">
   Exercise 6: Mind the Gap
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id17">
     6.1
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id18">
     6.2
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id19">
     6.3
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id20">
     6.4
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id21">
     6.5
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <p><img alt="" src="../../_images/511_banner3.png" /></p>
<div class="section" id="lab-3-introduction-to-numpy-and-pandas">
<h1>Lab 3: Introduction to NumPy and Pandas<a class="headerlink" href="#lab-3-introduction-to-numpy-and-pandas" title="Permalink to this headline">¬∂</a></h1>
<p><strong>Tomas Beuzen, September 2020</strong></p>
<p>In this lab, you‚Äôll complete various exercises using your new best friends NumPy and Pandas! These two packages are the foundation of data science in Python, providing you with the tools to create, load, operate on and generally wrangle data in practically any way imaginable! Broadly speaking, NumPy focuses on array-like data, while Pandas focuses on tabular data - you‚Äôll be using plenty of both throughout MDS!</p>
<p><img alt="" src="../../_images/fun.png" /></p>
<h2>Table of Contents<span class="tocSkip"></span></h2>
<div class="toc"><ul class="toc-item"><li><span><a href="#exercise-1-numpy-warm-up" data-toc-modified-id="Exercise-1:-NumPy-Warm-Up-2">Exercise 1: NumPy Warm Up</a></span></li><li><span><a href="#exercise-2-vectorizing-geometric-brownian-motion" data-toc-modified-id="Exercise-2:-Vectorizing-Geometric-Brownian-Motion-7">Exercise 2: Vectorizing Geometric Brownian Motion</a></span></li><li><span><a href="#exercise-3-numpy-wrangling" data-toc-modified-id="Exercise-3:-NumPy-Wrangling-8">Exercise 3: NumPy Wrangling</a></span></li><li><span><a href="#exercise-4-reading-data-with-pandas" data-toc-modified-id="Exercise-4:-Reading-Data-with-Pandas-13">Exercise 4: Reading Data with Pandas</a></span></li><li><span><a href="#exercise-5-treasure-hunt-with-pandas" data-toc-modified-id="Exercise-5:-Treasure-Hunt-with-Pandas-14">Exercise 5: Treasure Hunt with Pandas</a></span></li><li><span><a href="#exercise-6-mind-the-gap" data-toc-modified-id="Exercise-6:-Mind-the-Gap-16">Exercise 6: Mind the Gap</a></span></li></ul></div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import for this lab</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">gauss</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;ggplot&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
                     <span class="s1">&#39;axes.labelweight&#39;</span><span class="p">:</span> <span class="s1">&#39;bold&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;figure.figsize&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span>
                     <span class="s1">&#39;axes.grid&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="exercise-1-numpy-warm-up">
<h2>Exercise 1: NumPy Warm Up<a class="headerlink" href="#exercise-1-numpy-warm-up" title="Permalink to this headline">¬∂</a></h2>
<hr>
<blockquote>
<div><p><strong>I will demonstrate the solutions to these exercises in lab class and post the video to <a class="reference external" href="https://canvas.ubc.ca/courses/53659/external_tools/187">Canvas</a>.</strong></p>
</div></blockquote>
<p>Just a few quick exercises to get you in the NumPy mind-set!</p>
<div class="section" id="id1">
<h3>1.1<a class="headerlink" href="#id1" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p>Create the following array and save it as a variable <code class="docutils literal notranslate"><span class="pre">ex1_1</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
       <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
       <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ex1_1</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id2">
<h3>1.2<a class="headerlink" href="#id2" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p>Reshape the following <code class="docutils literal notranslate"><span class="pre">arr</span></code> into shape <code class="docutils literal notranslate"><span class="pre">(6,</span> <span class="pre">1)</span></code> and save the result as <code class="docutils literal notranslate"><span class="pre">ex1_2</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
<span class="n">ex1_2</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id3">
<h3>1.3<a class="headerlink" href="#id3" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p>Create a <code class="docutils literal notranslate"><span class="pre">(6,</span> <span class="pre">6)</span></code> matrix by multiplying the following <code class="docutils literal notranslate"><span class="pre">arr</span></code> by itself (hint: leverage broadcasting here). The first element (top left corner) should be 1, and the last element (bottom right corner) should be 36.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)[</span><span class="kc">None</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">ex1_3</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id4">
<h3>1.4<a class="headerlink" href="#id4" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p>‚ÄúCenter‚Äù the following <code class="docutils literal notranslate"><span class="pre">arr</span></code> by subtracting the mean from every element, then flatten it to shape <code class="docutils literal notranslate"><span class="pre">(20,)</span></code> and sort it in descending order.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">ex1_4</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-2-vectorizing-geometric-brownian-motion">
<h2>Exercise 2: Vectorizing Geometric Brownian Motion<a class="headerlink" href="#exercise-2-vectorizing-geometric-brownian-motion" title="Permalink to this headline">¬∂</a></h2>
<hr>
<blockquote>
<div><p><strong>I will demonstrate the solutions to these exercises in lab class and post the video to <a class="reference external" href="https://canvas.ubc.ca/courses/53659/external_tools/187">Canvas</a>.</strong></p>
</div></blockquote>
<div class="section" id="id5">
<h3>2.1<a class="headerlink" href="#id5" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={accuracy:2,quality:2}</p>
<p>In Lab 2 you created a function <code class="docutils literal notranslate"><span class="pre">simulate(S0,</span> <span class="pre">œÉ,</span> <span class="pre">T)</span></code> that simulates a stock price using geometric Brownian motion. In the model, the current price <span class="math notranslate nohighlight">\(S_t\)</span> depends on the previous price <span class="math notranslate nohighlight">\(S_{t-1}\)</span> as follows:</p>
<div class="math notranslate nohighlight">
\[S_t = S_{t-1} \exp \left( -0.5\sigma^2 + \sigma Z \right)\]</div>
<p>where <span class="math notranslate nohighlight">\(Z\)</span> is a random number drawn from a standard <a class="reference external" href="https://en.wikipedia.org/wiki/Normal_distribution">Gaussian distribution</a> and <span class="math notranslate nohighlight">\(\sigma\)</span> is the <em>volatility</em> of the stock (i.e., if <span class="math notranslate nohighlight">\(\sigma=0\)</span> then the stock price never changes, whereas if <span class="math notranslate nohighlight">\(\sigma\)</span> is large the stock price can change wildly).</p>
<p>The function we came up with in Lab 2 is shown below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">simulate</span><span class="p">(</span><span class="n">S0</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">œÉ</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates a stock price using geometric Brownian motion, </span>
<span class="sd">    and returns a list containing the results.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    S0 : float </span>
<span class="sd">        the initial stock price</span>
<span class="sd">    œÉ : float </span>
<span class="sd">        the volatility, should be non-negative</span>
<span class="sd">    T : int</span>
<span class="sd">        the number of time steps to simulate</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        The stock price of the stock at each time step </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; simulate(3.9, 0.5, 4)</span>
<span class="sd">    [3.9, 3.16886711, 1.06006414, 0.79470699]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">S</span> <span class="o">=</span> <span class="p">[</span><span class="n">S0</span><span class="p">]</span>
    <span class="c1"># append to list for each time T</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">T</span><span class="p">):</span>
        <span class="n">Z</span> <span class="o">=</span> <span class="n">gauss</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">S</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">t</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">œÉ</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">œÉ</span> <span class="o">*</span> <span class="n">Z</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">S</span>
</pre></div>
</div>
</div>
</div>
<p>Your task here is to re-write this function as <code class="docutils literal notranslate"><span class="pre">simulate_np(S0,</span> <span class="pre">œÉ,</span> <span class="pre">T)</span></code> using NumPy and <strong>without using a for loop</strong>. If you consider the equation above, you‚Äôll notice we don‚Äôt really need a for loop to simulate <strong>T</strong> time steps of geometric Brownian motion. Let‚Äôs do some math! Let‚Äôs denote <span class="math notranslate nohighlight">\(\theta = \exp \left( -0.5\sigma^2 + \sigma Z \right)\)</span>, then:</p>
<div class="math notranslate nohighlight">
\[S_{t+1} = S_{t} \theta_t\]</div>
<div class="math notranslate nohighlight">
\[S_{t+2} = S_{t+1} \theta_{t+1} = S_{t} \theta_t \theta_{t+1}\]</div>
<div class="math notranslate nohighlight">
\[S_{t+3} = S_{t+2} \theta_{t+2} = S_{t} \theta_t \theta_{t+1} \theta_{t+2}\]</div>
<div class="math notranslate nohighlight">
\[\textrm{...}\]</div>
<div class="math notranslate nohighlight">
\[S_{T} = S_{0} \prod_{t=1}^{T} \theta_{t}\]</div>
<p>With the above in mind, use NumPy to create <code class="docutils literal notranslate"><span class="pre">simulate_np(S0,</span> <span class="pre">œÉ,</span> <span class="pre">T)</span></code> that calculate geometric Brownian motion <strong>without a for loop</strong>.</p>
<p>Hints:</p>
<ul class="simple">
<li><p>ùúÉ does not depend on the stock price at time <code class="docutils literal notranslate"><span class="pre">t</span></code>, so you can create <span class="math notranslate nohighlight">\(\prod_{t=1}^{T} \theta_{t}\)</span> without using a loop.</p></li>
<li><p>You can create a <code class="docutils literal notranslate"><span class="pre">Z</span></code> with <code class="docutils literal notranslate"><span class="pre">np.random.randn()</span></code>.</p></li>
<li><p>You can calculate the cumulative product of an array using <code class="docutils literal notranslate"><span class="pre">.cumprod()</span></code>.</p></li>
<li><p>Your function can return an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> instead of a <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p></li>
<li><p>You are given some plotting code to test out your function.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">simulate_np</span><span class="p">(</span><span class="n">S0</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">œÉ</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="k">pass</span>  <span class="c1"># remove if providing a solution</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Code you can use for plotting your function </span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">trace</span> <span class="o">=</span> <span class="n">simulate_np</span><span class="p">(</span><span class="n">S0</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">œÉ</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Stock price&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Plotting failed, here&#39;s the traceback:</span><span class="se">\n</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Plotting failed, here&#39;s the traceback:
x, y, and format string must not be None.
</pre></div>
</div>
<img alt="../../_images/lab3_25_1.png" src="../../_images/lab3_25_1.png" />
</div>
</div>
</div>
<div class="section" id="id6">
<h3>2.2<a class="headerlink" href="#id6" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={accuracy:2}</p>
<p>This question is optional but I highly recommend it if you have time (pun intended) - it will really help drive home the power of the NumPy library vs base Python when operating on array-like data! You can use the <code class="docutils literal notranslate"><span class="pre">time</span></code> module to help calculate the time it takes (in <a class="reference external" href="https://communities.sas.com/t5/SAS-Programming/Real-Time-vs-CPU-time/td-p/287743#:~:text=Real%20Time%20is%20the%20actual,the%20step%20utilises%20CPU%20resources.">real time</a>) for your code to execute. Write code to record how long it takes for <code class="docutils literal notranslate"><span class="pre">simulate()</span></code> and your new-and-improved <code class="docutils literal notranslate"><span class="pre">simulate_np()</span></code> to run 10,000 times (using their default values of <code class="docutils literal notranslate"><span class="pre">(S0=1,</span> <span class="pre">œÉ=0.1,</span> <span class="pre">T=1000)</span></code>).</p>
<p>Hints:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">time</span></code> module has already been imported for you at the start of the lab.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">time.time()</span></code> gives you the current clock time (so you can save a variable <code class="docutils literal notranslate"><span class="pre">start</span> <span class="pre">=</span> <span class="pre">time.time()</span></code> before you code and <code class="docutils literal notranslate"><span class="pre">end</span> <span class="pre">=</span> <span class="pre">time.time()</span></code> after your code and compare the difference).</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-3-numpy-wrangling">
<h2>Exercise 3: NumPy Wrangling<a class="headerlink" href="#exercise-3-numpy-wrangling" title="Permalink to this headline">¬∂</a></h2>
<hr><div class="section" id="id7">
<h3>3.1<a class="headerlink" href="#id7" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={accuracy:1}</p>
<p>Below is a 400 x 400 pixel image of me, imported and displayed with <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> (a plotting library that you‚Äôll learn about in DSCI 531).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;img/tomas_beuzen.png&#39;</span><span class="p">)[:,:,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Image shape: </span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Max. pixel value: </span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Min. pixel value: </span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Image shape: (400, 400)
Max. pixel value: 1.0
Min. pixel value: 0.0
</pre></div>
</div>
<img alt="../../_images/lab3_32_1.png" src="../../_images/lab3_32_1.png" />
</div>
</div>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">image</span></code> is just a numpy array of size <code class="docutils literal notranslate"><span class="pre">(400,</span> <span class="pre">400)</span></code>, with values ranging from -1 to 1.</p>
<p>Your task is to <strong>rotate and flip the image</strong> so that it looks like this:</p>
<p><img alt="" src="../../_images/tomas_beuzen_flipped.png" /></p>
<p>Hints:</p>
<ul class="simple">
<li><p>Plot the image using <code class="docutils literal notranslate"><span class="pre">plt.imshow(&lt;ndarray&gt;,</span> <span class="pre">cmap='gray')</span></code>, as I‚Äôve done above.</p></li>
<li><p>Do not overwrite the <code class="docutils literal notranslate"><span class="pre">image</span></code> variable, we will use it in the next few questions.</p></li>
<li><p>NumPy has helpful functions for ‚Äúflipping‚Äù arrays! In Jupyter, you can try typing <code class="docutils literal notranslate"><span class="pre">np.flip</span></code> and then press tab to see what the auto-complete reveals‚Ä¶</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id8">
<h3>3.2<a class="headerlink" href="#id8" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={accuracy:2}</p>
<p>I want to prepare this image to post on Instagram and I think a 20 pixel black border will really make my eyes pop. Add a 20 pixel wide border of black pixels to my image so that it looks like this:</p>
<p><img alt="" src="../../_images/tomas_beuzen_border.png" /></p>
<p>Hints:</p>
<ul class="simple">
<li><p>The image including the border should remain 400 x 400 pixels (i.e., you are adding the border within the image), <strong>do not</strong> add it to the outside and make the image 440 x 440 pixels.</p></li>
<li><p>Black pixels have a value of <code class="docutils literal notranslate"><span class="pre">0</span></code> (i.e., they have 0 brightness).</p></li>
<li><p>There are many ways to solve this question so do it however you like, but <code class="docutils literal notranslate"><span class="pre">np.pad()</span></code> might be helpful‚Ä¶</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="optional-3-3">
<h3>(OPTIONAL) 3.3<a class="headerlink" href="#optional-3-3" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={accuracy:1}</p>
<p>In DSCI 572 you‚Äôll learn about <a class="reference external" href="https://en.wikipedia.org/wiki/Convolutional_neural_network">Convolutional Neural Networks</a> (CNN), which are often used when working with image data, e.g., to build image classification models. A common operation in a CNN architecture is <a class="reference external" href="https://cs231n.github.io/convolutional-networks/#pool">pooling</a>, in which you reduce the size of an image by looking at a small window of pixels, say a 4 x 4 window of pixels, and representing that window using e.g., the max/min/mean value of the pixels in the window. Below is an example of mean pooling, transforming a 6 x 6 image into a 3 x 3 image by taking the mean of 2 x 2 pixel windows:</p>
<p><img alt="" src="https://stanford.edu/~shervine/teaching/cs-230/illustrations/average-pooling-a.png?58f9ab6d61248c3ec8d526ef65763d2f" /></p>
<p>Source: <a class="reference external" href="https://stanford.edu/~shervine/teaching/cs-230/cheatsheet-convolutional-neural-networks">stanford.edu</a></p>
<p>You‚Äôll learn more about CNN architecure and operations in DSCI 572, but for some foreshadowing, let‚Äôs implement pooling in NumPy here. We can do it by reshaping our image into <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">x</span> <span class="pre">n</span></code> windows and then calculating the <code class="docutils literal notranslate"><span class="pre">.max()</span></code> of each window. Your task here is to implement <strong>mean</strong> pooling on the image of me using a <code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">x</span> <span class="pre">10</span></code> window, the result will look like this:</p>
<p><img alt="" src="../../_images/tomas_beuzen_mean_pool.png" /></p>
<p>Hint:</p>
<ul class="simple">
<li><p>There are plenty of ways you could solve this question but I started by reshaping both axes of the image into shape <code class="docutils literal notranslate"><span class="pre">(40,</span> <span class="pre">10)</span></code>, to end up with a 4D array of shape <code class="docutils literal notranslate"><span class="pre">(40,</span> <span class="pre">10,</span> <span class="pre">40,</span> <span class="pre">10)</span></code>.</p></li>
<li><p>Then apply <code class="docutils literal notranslate"><span class="pre">.mean()</span></code> to the reshaped data on both the axes of size 10 (you can specify multiple axes to operate on simultaneously by passing a tuple to the <code class="docutils literal notranslate"><span class="pre">axis=</span></code> argument of <code class="docutils literal notranslate"><span class="pre">.mean()</span></code>)</p></li>
<li><p>See <a class="reference external" href="https://stackoverflow.com/a/42463514">here</a> for more help.</p></li>
<li><p>Play around with you code to get a feel for what pooling does. What happens if you increase/decrease the pooling window size? Also feel free to try using <code class="docutils literal notranslate"><span class="pre">.min()</span></code> or <code class="docutils literal notranslate"><span class="pre">.max()</span></code> for a more ‚Äúhorror-movie‚Äù effect, for example:</p></li>
</ul>
<p><img alt="" src="../../_images/tomas_beuzen_min_pool.png" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="optional-3-4">
<h3>(OPTIONAL) 3.4<a class="headerlink" href="#optional-3-4" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={accuracy:1}</p>
<p>As the name suggests, another common operation in CNNs is convolution. A convolutional layer applies so called ‚Äúfilters‚Äù to an image. This is kind of like the pooling we saw in the previous question, but instead of representing a window of pixels by some summary statistic, a filter is a window of ‚Äúweights‚Äù, which is passed over an image and used to create ‚Äúnew pixels‚Äù by multiplying the original pixels by weights and summing them all together. The idea in CNN‚Äôs is that these filters can be used to extract useful information from the data; for example, they might highlight the edges in an image, or colour boundaries, which could help a machine learning model classify what that image contains.</p>
<p>In the example below, a 3 x 3 filter with weights of 0‚Äôs, 1‚Äôs, 2‚Äôs and 3‚Äôs is being passed over an image. <a class="reference external" href="https://setosa.io/ev/image-kernels/">Here is a fun interactive exploration</a> of convolutional filters if you want to learn more, but you‚Äôll learn about CNN‚Äôs in DSCI 572 so don‚Äôt worry too much about them here.</p>
<p><img alt="" src="http://deeplearning.net/software/theano/_images/numerical_no_padding_no_strides.gif" /></p>
<p>Source: <a class="reference external" href="http://deeplearning.net/software/theano/tutorial/conv_arithmetic.html#refresher-discrete-convolutions">deeplearning.net</a></p>
<p>Your task here is to implement a convolutional layer in NumPy. Apply the filter <code class="docutils literal notranslate"><span class="pre">f</span></code> I‚Äôve defined in the code below to my image. The result will look like this:</p>
<p><img alt="" src="../../_images/tomas_beuzen_emboss.png" /></p>
<p>You should pad the image with 0‚Äôs so that you can apply the filter to the edges and corners, like this:</p>
<p><img alt="" src="http://deeplearning.net/software/theano/_images/numerical_padding_strides.gif" /></p>
<p>Source: <a class="reference external" href="http://deeplearning.net/software/theano/tutorial/conv_arithmetic.html#refresher-discrete-convolutions">deeplearning.net</a></p>
<p>There are many ways to solve this problem, but my solution involved leverage strides, here‚Äôs a hint to get you started: https://jessicastringham.net/2017/12/31/stride-tricks/, and see <a class="reference external" href="https://stackoverflow.com/questions/53097952/how-to-understand-numpy-strides-for-layman">here</a> for more information in ‚Äústrides‚Äù in NumPy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
              <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>  <span class="c1"># filter to apply</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-4-reading-data-with-pandas">
<h2>Exercise 4: Reading Data with Pandas<a class="headerlink" href="#exercise-4-reading-data-with-pandas" title="Permalink to this headline">¬∂</a></h2>
<hr>
<p>rubric={autograde:5}</p>
<p>Reading data from external sources will be one of the most common things you do in Pandas, so it‚Äôs good to get some practice doing this. We will use Pandas to read in variants of the Palmer penguins data set that you‚Äôve already seen in DSCI 523. In this data set there are measures on the three species of penguins shown in this illustration below. You can learn more about the penguins and this data set <a class="reference external" href="https://allisonhorst.github.io/palmerpenguins/">here</a>.</p>
<p><img alt="" src="../../_images/penguins.png" /></p>
<p>Source: <a class="reference external" href="https://github.com/allisonhorst/palmerpenguins/blob/master/man/figures/lter_penguins.png?raw=true">allisonhorst.github.io</a></p>
<p>In the data directory of this repository there are 5 different versions of the same data set in different file formats. Your task is to read each of these into a Pandas dataframe. A test has been provided to make sure you‚Äôve correctly read each file in.</p>
<p>Hint: you can compare which rows of two dataframes are not equal using something like <code class="docutils literal notranslate"><span class="pre">penguins_csv[~penguins_csv.eq(penguins_tsv).any(axis=1)]</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># read in file named penguins.csv</span>
<span class="n">penguins_csv</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># read in file named penguins.tsv</span>
<span class="n">penguins_tsv</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># read in file named penguins-meta-data.csv</span>
<span class="n">penguins_meta_data</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># read in file named penguins2.csv</span>
<span class="n">penguins2</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># read in file named penguins.xlsx</span>
<span class="n">penguins_excel</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-5-treasure-hunt-with-pandas">
<h2>Exercise 5: Treasure Hunt with Pandas<a class="headerlink" href="#exercise-5-treasure-hunt-with-pandas" title="Permalink to this headline">¬∂</a></h2>
<hr>
<blockquote>
<div><p><strong>I will demonstrate solutions to some of these exercises in lab class and post the video to <a class="reference external" href="https://canvas.ubc.ca/courses/53659/external_tools/187">Canvas</a>.</strong></p>
</div></blockquote>
<p>Learning how to index with Pandas is kind of like having to eat your vegetables: it‚Äôs not the funnest thing, but you need to know it! In this exercise, I‚Äôll provide you with clues that you need to use to index a dataframe and find the ‚ÄúTreasure‚Äù. For example, if the clue is ‚ÄúThe first ten rows‚Äù then you might try:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
<span class="s1">&#39;TREASURE&#39;</span>
</pre></div>
</div>
<p>The above is just an example, but the result of your indexing should always be the string <code class="docutils literal notranslate"><span class="pre">'TREASURE'</span></code>.</p>
<div class="section" id="id9">
<h3>5.1<a class="headerlink" href="#id9" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p>Load in the file <code class="docutils literal notranslate"><span class="pre">treasure_hunt.csv</span></code> as a dataframe called <code class="docutils literal notranslate"><span class="pre">treasure_df</span></code>. Read in the first column as the dataframe index column and the first row as the dataframe columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">treasure_df</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id10">
<h3>5.2<a class="headerlink" href="#id10" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p><strong>CLUE:</strong> C20, R1</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ex5_2</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id11">
<h3>5.3<a class="headerlink" href="#id11" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p><strong>CLUE:</strong> thirteenth column, thirteenth row (<em>hint</em>: recall that indexing starts at 0!)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ex5_3</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id12">
<h3>5.4<a class="headerlink" href="#id12" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p><strong>CLUE:</strong> R28, tenth column</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ex5_4</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id13">
<h3>5.5<a class="headerlink" href="#id13" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p><strong>CLUE:</strong> C26, R19 to R26</p>
<p><strong>HINT:</strong> You might need to do a bit of extra wrangling to get a result of ‚ÄúTREASURE‚Äù here‚Ä¶</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ex5_5</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id14">
<h3>5.6<a class="headerlink" href="#id14" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p><strong>CLUE:</strong> The first rows of C29 <em>plus</em> the first row of C30</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ex5_6</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id15">
<h3>5.7<a class="headerlink" href="#id15" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p><strong>CLUE:</strong> The first row of all columns that <strong>do not</strong> have a ‚ÄúZ‚Äù in the last row.</p>
<p><strong>HINT:</strong> You might need to do a bit of extra wrangling to get a result of ‚ÄúTREASURE‚Äù here‚Ä¶</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ex5_7</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id16">
<h3>5.8<a class="headerlink" href="#id16" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={autograde:1}</p>
<p><strong>CLUE:</strong> C1 for C1 &lt; C2 (remember, in Python, comparison operators work on string too, e.g., <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span> <span class="pre">&lt;</span> <span class="pre">&quot;b&quot;</span> <span class="pre">=</span> <span class="pre">True</span></code> because <code class="docutils literal notranslate"><span class="pre">a</span></code> occurs before <code class="docutils literal notranslate"><span class="pre">b</span></code> alphabetically. Also, don‚Äôt forget about <code class="docutils literal notranslate"><span class="pre">.query()</span></code>!)</p>
<p><strong>HINT:</strong> You might need to do a bit of extra wrangling to get a result of ‚ÄúTREASURE‚Äù here‚Ä¶</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ex5_8</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-6-mind-the-gap">
<h2>Exercise 6: Mind the Gap<a class="headerlink" href="#exercise-6-mind-the-gap" title="Permalink to this headline">¬∂</a></h2>
<hr><p>In this exercise, we‚Äôll practice some basic Pandas operations on the <a class="reference external" href="https://www.gapminder.org/about-gapminder/">Gapminder dataset</a> which you are already familiar with from your DSCI 523 labs. Gapminder is an educational foundation that aims to use data to unbiasedly describe trends in health and socioeconomics; it is a great source of geographical, socioeconomic, and health data - a subset of which we‚Äôll be exploring here. In particular, we‚Äôll be exploring a dataframe of the following features in this exercise:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p></p></th>
<th class="text-align:center head"><p>country</p></th>
<th class="text-align:center head"><p>continent</p></th>
<th class="text-align:center head"><p>year</p></th>
<th class="text-align:center head"><p>lifeExp</p></th>
<th class="text-align:center head"><p>pop</p></th>
<th class="text-align:center head"><p>gdpPercap</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>Afghanistan</p></td>
<td class="text-align:center"><p>Asia</p></td>
<td class="text-align:center"><p>1952</p></td>
<td class="text-align:center"><p>28.801</p></td>
<td class="text-align:center"><p>8425333</p></td>
<td class="text-align:center"><p>779.445314</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>1</p></td>
<td class="text-align:center"><p>Afghanistan</p></td>
<td class="text-align:center"><p>Asia</p></td>
<td class="text-align:center"><p>1957</p></td>
<td class="text-align:center"><p>30.332</p></td>
<td class="text-align:center"><p>9240934</p></td>
<td class="text-align:center"><p>820.853030</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>2</p></td>
<td class="text-align:center"><p>Afghanistan</p></td>
<td class="text-align:center"><p>Asia</p></td>
<td class="text-align:center"><p>1962</p></td>
<td class="text-align:center"><p>31.997</p></td>
<td class="text-align:center"><p>10267083</p></td>
<td class="text-align:center"><p>853.100710</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>3</p></td>
<td class="text-align:center"><p>Afghanistan</p></td>
<td class="text-align:center"><p>Asia</p></td>
<td class="text-align:center"><p>1967</p></td>
<td class="text-align:center"><p>34.020</p></td>
<td class="text-align:center"><p>11537966</p></td>
<td class="text-align:center"><p>836.197138</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>4</p></td>
<td class="text-align:center"><p>Afghanistan</p></td>
<td class="text-align:center"><p>Asia</p></td>
<td class="text-align:center"><p>1972</p></td>
<td class="text-align:center"><p>36.088</p></td>
<td class="text-align:center"><p>13079460</p></td>
<td class="text-align:center"><p>739.981106</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>‚Ä¶</p></td>
<td class="text-align:center"><p>‚Ä¶</p></td>
<td class="text-align:center"><p>‚Ä¶</p></td>
<td class="text-align:center"><p>‚Ä¶</p></td>
<td class="text-align:center"><p>‚Ä¶</p></td>
<td class="text-align:center"><p>‚Ä¶</p></td>
<td class="text-align:center"><p>‚Ä¶</p></td>
</tr>
</tbody>
</table>
<div class="section" id="id17">
<h3>6.1<a class="headerlink" href="#id17" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={accuracy:1}</p>
<p>Read the gapminder dataset into a dataframe called <code class="docutils literal notranslate"><span class="pre">df</span></code> from this url: <a class="reference external" href="https://raw.githubusercontent.com/jstaf/gapminder/master/gapminder/gapminder.csv">https://raw.githubusercontent.com/jstaf/gapminder/master/gapminder/gapminder.csv</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id18">
<h3>6.2<a class="headerlink" href="#id18" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={accuracy:1}</p>
<p>Which continent has the most observations in the gapminder dataset? You can leave your answer as the output of a dataframe operation (<em>hint</em>: <code class="docutils literal notranslate"><span class="pre">.value_counts()</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id19">
<h3>6.3<a class="headerlink" href="#id19" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={accuracy:2}</p>
<p>What are the minimum and maximum life expectancies in the dataset, and what are the corresponding countries and the years? (<em>hint</em>: <code class="docutils literal notranslate"><span class="pre">.argmin()</span></code>/<code class="docutils literal notranslate"><span class="pre">.argmax()</span></code>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id20">
<h3>6.4<a class="headerlink" href="#id20" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={accuracy:2}</p>
<p>How much larger is the total population in this dataset in 2007 compared to 1952? You can give you answer as a float, e.g., ‚Äúthe population is 1.8 times larger in 2007 than in 1952.‚Äù (<em>hint</em>: I would use <code class="docutils literal notranslate"><span class="pre">.query()</span></code> to subset the dataframe for 1952 and then calculate the <code class="docutils literal notranslate"><span class="pre">.sum()</span></code> of the population, then repeat for 2007).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id21">
<h3>6.5<a class="headerlink" href="#id21" title="Permalink to this headline">¬∂</a></h3>
<p>rubric={accuracy:2}</p>
<p>What is the mean life expectancy of countries with the highest 50% of <code class="docutils literal notranslate"><span class="pre">gdpPercap</span></code> and countries with the lowest 50% of <code class="docutils literal notranslate"><span class="pre">gdpPercap</span></code>? (<em>hint</em>: try combining <code class="docutils literal notranslate"><span class="pre">.query()</span></code> and <code class="docutils literal notranslate"><span class="pre">.median()</span></code>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Your answer goes here.</span>
</pre></div>
</div>
</div>
</div>
<p><img alt="" src="../../_images/super.png" /></p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./lab-assignments/lab3"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="../lab2/lab2.html" title="previous page">Lab 2: Tests, Classes, Style &amp; Imports</a>
    <a class='right-next' id="next-link" href="../lab4/lab4.html" title="next page">Lab 4: Advanced Wrangling with Pandas</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Tomas Beuzen<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    
  </body>
</html>